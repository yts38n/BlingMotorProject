{"version":3,"file":"all.js","names":["Calendar","data","state","current","Date","days","dataYear","parseInt","dataMonth","dataDates","render","setHours","calendar","document","getElementById","innerHTML","calendarMonthPickers","createElement","className","preMonth","nextMonth","currentMonth","textContent","appendChild","calendarWrap","dayWrapper","dateWrapper","firstDate","dateForLoop","getFullYear","getMonth","setDate","getDate","getDay","day","renderDay","renderDate","renderSelectDates","cell","innerText","date","currentDate","dataset","getTime","undefined","querySelector","addEventListener","e","target","search","dateInnersSelected","classList","remove","timestamp","parentNode","showSelectedDate","formatDate","value","setMonth","currentQueryYear","currentQueryMonth","calendarData","blingMotorUserStatus","signoutBtn","doSignout","getCalendar","newQueryYear","newQueryMonth","axios","get","params","toString","then","response","calanderEventListeners","alert","error","console","log","targetYear","targetMonth","checkLogin","blingMotorUserInfo","localStorage","getItem","JSON","parse","loginSingoutControl","clear","window","location","replace","loginControl","singoutControl","myInfo","myHistory","add","recordUserStatus","userInfo","setItem","stringify"],"sources":["all.js"],"sourcesContent":["class Calendar {\r\n    constructor(data) {\r\n        this.state = {\r\n            current: new Date()\r\n        };\r\n        this.days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\r\n        this.data = data;\r\n        this.dataYear = parseInt(data['year']);\r\n        this.dataMonth = parseInt(data['month']) - 1; //Date 物件的 Month 起始值為0\r\n        this.dataDates = data['dates'];\r\n        this.render();\r\n    }\r\n\r\n    render() {\r\n        // 設定系統日期為當日的00:00:00\r\n        this.state.current.setHours(0, 0, 0, 0);\r\n\r\n        // 初始化 calendar\r\n        let calendar = document.getElementById('calendar');\r\n        calendar.innerHTML = '';\r\n\r\n        /* --- 開始 --- 渲染 calendarMonthPickers (顯示當前月份+月份選擇元素)*/\r\n        let calendarMonthPickers = document.createElement('div');\r\n        calendarMonthPickers.className = 'calendarMonthPickers';\r\n        let preMonth = document.createElement('span');\r\n        preMonth.className = 'material-symbols-outlined preMonth';\r\n        let nextMonth = document.createElement('span');\r\n        nextMonth.className = 'material-symbols-outlined nextMonth';\r\n        let currentMonth = document.createElement('h3');\r\n        currentMonth.className = 'calendarMonth-Current';\r\n\r\n        currentMonth.textContent = `${this.data[\"year\"]} / ${this.data[\"month\"]}`;\r\n        preMonth.textContent = `arrow_back_ios`;\r\n        nextMonth.textContent = `arrow_forward_ios`;\r\n\r\n        calendarMonthPickers.appendChild(preMonth);\r\n        calendarMonthPickers.appendChild(currentMonth);\r\n        calendarMonthPickers.appendChild(nextMonth);\r\n        /*  --- 結束 --- 渲染 calendarMonthPickers (顯示當前月份+月份選擇元素)*/\r\n\r\n        /* --- 開始 --- 渲染 calendar-wrap 內容 */\r\n        let calendarWrap = document.createElement('div');\r\n        calendarWrap.className = 'container calendar-wrap';\r\n        let dayWrapper = document.createElement('div');\r\n        dayWrapper.className = 'row row-cols-7 dayWrapper';\r\n        let dateWrapper = document.createElement('div');\r\n        dateWrapper.className = 'row row-cols-7 dateWrapper';\r\n\r\n        //取得 data 的當月1號\r\n        let firstDate = new Date(this.dataYear, this.dataMonth);\r\n\r\n        //先new一個當月1號的物件用作計算日期(loop+1)，避免Date指向同一個物件\r\n        let dateForLoop = new Date(firstDate.getFullYear(), firstDate.getMonth())\r\n\r\n        //設定日歷的第一個禮拜日是上個月的幾號\r\n        dateForLoop.setDate(dateForLoop.getDate() - dateForLoop.getDay());\r\n\r\n        //畫出禮拜幾\r\n        for (let day of this.days) {\r\n            this.renderDay(day, dayWrapper);\r\n        }\r\n\r\n        //畫出上個月\r\n        while (dateForLoop < firstDate) {\r\n            this.renderDate(dateForLoop, dateWrapper);\r\n            dateForLoop.setDate(dateForLoop.getDate() + 1);\r\n        }\r\n\r\n        //畫出這個月 (目前date已是本月的1號)，如果date的月份是當月，就畫格子。date的月份變成下一個月，就停止畫。\r\n        while (dateForLoop.getMonth() === firstDate.getMonth()) {\r\n            this.renderDate(dateForLoop, dateWrapper)\r\n            dateForLoop.setDate(dateForLoop.getDate() + 1);\r\n        }\r\n\r\n        //畫出下個月 (目前date 是下個月的1號)。只要還沒到禮拜六，就繼續畫。\r\n        while (dateForLoop.getDay() !== 0) {\r\n            this.renderDate(dateForLoop, dateWrapper)\r\n            dateForLoop.setDate(dateForLoop.getDate() + 1);\r\n        }\r\n\r\n        //寫入 calendarWrap\r\n        calendarWrap.appendChild(dayWrapper);\r\n        calendarWrap.appendChild(dateWrapper);\r\n        /* --- 結束 --- 渲染 calendar-wrap 內容 */\r\n\r\n        //寫入 calendar\r\n        calendar.appendChild(calendarMonthPickers);\r\n        calendar.appendChild(calendarWrap);\r\n\r\n        //監聽選取日期行為\r\n        this.renderSelectDates()\r\n    }\r\n\r\n    renderDay(day, dayWrapper) {\r\n        let cell = document.createElement('div');\r\n        cell.className = 'dayInners';\r\n        cell.innerText = day;\r\n        dayWrapper.appendChild(cell);\r\n    }\r\n\r\n    renderDate(date, dateWrapper) {\r\n        let currentDate = this.state.current;\r\n\r\n        let cell = document.createElement('div');\r\n        cell.className = 'dateInners';\r\n        cell.dataset[\"date\"] = date.getTime();\r\n        cell.textContent = date.getDate()\r\n\r\n        //今日以前的日期、非當月日期改成白色\r\n        cell.className += (date >= currentDate) ? '' : ' notAvailable';\r\n        cell.className += (date.getMonth() === this.dataMonth) ? '' : ' notAvailable';\r\n\r\n        //可預約數量為0時，顯示紅色背景色\r\n        if (this.dataDates[date.getTime()] !== undefined) {\r\n            cell.className += (date >= currentDate && date.getMonth() === this.dataMonth && this.dataDates[date.getTime()]['available'] === true && this.dataDates[date.getTime()]['spaces'] === 0) ? ' dateFull' : '';\r\n        }\r\n\r\n        dateWrapper.appendChild(cell);\r\n    }\r\n\r\n    renderSelectDates() {\r\n        document.querySelector('.dateWrapper').addEventListener('click', (e) => {\r\n            if ((e.target.className.search(/dateFull/) === -1 && e.target.className.search(/notAvailable/) === -1)) {\r\n\r\n                //移除已選項目的 border-color\r\n                let dateInnersSelected = document.querySelector('.dateInners-selected');\r\n                if (dateInnersSelected !== null) {\r\n                    dateInnersSelected.classList.remove('dateInners-selected');\r\n                }\r\n                //新增現有項目的 border-color\r\n                e.target.className += ' dateInners-selected'\r\n\r\n                //顯示現有項目的日期\r\n                let timestamp = '';\r\n                if (e.target.dataset.date === undefined) {\r\n                    timestamp = e.target.parentNode.dataset.date;\r\n                } else {\r\n                    timestamp = e.target.dataset.date;\r\n                }\r\n                showSelectedDate(timestamp);\r\n            } else {\r\n                return;\r\n            };\r\n\r\n            function showSelectedDate(timestamp) {\r\n                let date = new Date(parseInt(timestamp));\r\n                let formatDate = `${date.getFullYear()} / ${date.getMonth()+1} / ${date.getDate()}`\r\n                document.querySelector('#selectedDate').value = formatDate;\r\n            }\r\n        });\r\n    }\r\n\r\n    preMonth() {\r\n        // let targetMonth = (this.state.current.getMonth() === 0) ? 12 : this.state.current.getMonth();\r\n        // targetMonth += '';\r\n\r\n        // if (this.data['month'].hasOwnProperty(targetMonth) === true) {\r\n        //     this.state.current.setMonth(this.state.current.getMonth() - 1);\r\n        //     this.render();\r\n        // } else {\r\n        //     alert('Previous month is not available.');\r\n        //     return\r\n        // }\r\n\r\n        this.state.current.setMonth(this.state.current.getMonth() - 1);\r\n        this.render();\r\n    }\r\n\r\n    nextMonth() {\r\n        // let targetMonth = (this.state.current.getMonth() + 2 >= 13) ? this.state.current.getMonth() + 2 - 12 : this.state.current.getMonth() + 2;\r\n        // targetMonth += '';\r\n\r\n        // if (this.data['month'].hasOwnProperty(targetMonth) === true) {\r\n        //     this.state.current.setMonth(this.state.current.getMonth() + 1);\r\n        //     this.render();\r\n        // } else {\r\n        //     alert('Next month is not available.');\r\n        //     return\r\n        // }\r\n\r\n        this.state.current.setMonth(this.state.current.getMonth() + 1);\r\n        this.render();\r\n    }\r\n}\r\n\r\nlet currentQueryYear = new Date().getFullYear();\r\nlet currentQueryMonth = new Date().getMonth() + 1;\r\nlet calendarData = {};\r\nlet blingMotorUserStatus = {\r\n    'isLogin': false,\r\n    'userInfo': {}\r\n};\r\nlet signoutBtn = document.querySelector('#singoutControl');\r\nsignoutBtn.addEventListener('click', doSignout);\r\n\r\nfunction getCalendar(newQueryYear, newQueryMonth) {\r\n    axios.get(`https://bling-motor-mock-server.onrender.com/api/v1/customers/calendar`, {\r\n            params: {\r\n                'year': newQueryYear.toString(),\r\n                'month': newQueryMonth.toString()\r\n            }\r\n        })\r\n        .then(response => {\r\n            calendarData = response.data.data;\r\n            if (calendarData['available'] === true) {\r\n                const calendar = new Calendar(calendarData);\r\n                calanderEventListeners();\r\n                currentQueryYear = parseInt(calendarData['year']);\r\n                currentQueryMonth = parseInt(calendarData['month']);\r\n            } else {\r\n                alert('該月份未開放預訂');\r\n            }\r\n        })\r\n        .catch(error => {\r\n            console.log(error);\r\n        });\r\n}\r\n\r\nfunction calanderEventListeners() {\r\n    document.querySelector('.preMonth').addEventListener('click', () => {\r\n        let targetYear = 0;\r\n        let targetMonth = 0;\r\n\r\n        if (currentQueryMonth - 1 === 0) {\r\n            targetYear = currentQueryYear - 1;\r\n            targetMonth = 12;\r\n        } else {\r\n            targetYear = currentQueryYear;\r\n            targetMonth = currentQueryMonth - 1;\r\n        }\r\n        getCalendar(targetYear, targetMonth)\r\n    });\r\n\r\n    document.querySelector('.nextMonth').addEventListener('click', () => {\r\n        let targetYear = 0;\r\n        let targetMonth = 0;\r\n\r\n        if (currentQueryMonth + 1 === 13) {\r\n            targetYear = currentQueryYear + 1;\r\n            targetMonth = 1;\r\n        } else {\r\n            targetYear = currentQueryYear;\r\n            targetMonth = currentQueryMonth + 1;\r\n        }\r\n        getCalendar(targetYear, targetMonth)\r\n    });\r\n}\r\n\r\nfunction checkLogin() {\r\n    if (blingMotorUserStatus['isLogin'] === false) {\r\n        let blingMotorUserInfo = localStorage.getItem('blingMotorUserInfo');\r\n        if (blingMotorUserInfo !== null) {\r\n            blingMotorUserStatus['isLogin'] = true;\r\n            blingMotorUserStatus['userInfo'] = JSON.parse(blingMotorUserInfo);\r\n        }\r\n    }\r\n    loginSingoutControl();\r\n}\r\n\r\nfunction doSignout() {\r\n    if (blingMotorUserStatus['isLogin'] === true) {\r\n        localStorage.clear();\r\n        blingMotorUserStatus['isLogin'] = false;\r\n        blingMotorUserStatus['userInfo'] = {}\r\n    }\r\n    window.location.replace('index.html');\r\n}\r\n\r\nfunction loginSingoutControl() {\r\n    let loginControl = document.querySelector('#loginControl');\r\n    let singoutControl = document.querySelector('#singoutControl');\r\n    let myInfo = document.querySelector('#myInfo');\r\n    let myHistory = document.querySelector('#myHistory');\r\n\r\n    if (blingMotorUserStatus['isLogin'] === true) {\r\n        loginControl.classList.add('d-none');\r\n        singoutControl.classList.remove('d-none');\r\n        myInfo.classList.remove('d-none');\r\n        myHistory.classList.remove('d-none');\r\n    } else {\r\n        loginControl.classList.remove('d-none');\r\n        singoutControl.classList.add('d-none');\r\n        myInfo.classList.add('d-none');\r\n        myHistory.classList.add('d-none');\r\n    }\r\n}\r\n\r\nfunction recordUserStatus(userInfo) {\r\n    blingMotorUserStatus['isLogin'] = true;\r\n    blingMotorUserStatus['userInfo'] = userInfo;\r\n    localStorage.setItem('blingMotorUserInfo', JSON.stringify(blingMotorUserStatus['userInfo']));\r\n    window.location.replace('index.html');\r\n}\r\n\r\ncheckLogin();"],"mappings":"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"}