{"version":3,"file":"userHistory.js","names":["userToken","blingMotorUserStatus","userHistoryData","tbody","document","querySelector","editReservationElement","getUserReservation","axios","post","then","response","data","renderUserHistory","error","console","log","updateReservation","bookingId","previousSibling","dataset","bookingid","selectedDate","Date","value","setHours","toString","selectedPlan","customerMsg","originalBookingInfo","find","id","parseInt","patch","alert","msg","window","location","reload","deleteReservation","getSelectedBookingCalendar","selectedBooking","targetYear","getFullYear","targetMonth","getMonth","get","params","calendarData","calendar","Calendar","calanderEventListeners","renderEditReservation","currentQueryYear","currentQueryMonth","str","sort","a","b","forEach","el","date","dateFormat","getDate","editable","innerHTML","calendarSelected","className","selectedBookingDate","createUserHistoryCalendar","targetElement","userHistoryCalendar","opended","removeUserHistoryCalendar","insertCalendar","createElement","setAttribute","selectedBookingId","parentElement","getAttribute","insertBefore","nextSibling","innerText","remove","classList","monitorEditAction","dateWrapper","bookingFromWrap","confirmEdit","addEventListener","e","target","contains"],"sources":["userHistory.js"],"sourcesContent":["let userToken = blingMotorUserStatus['userInfo']['customerEmail'];\r\nlet userHistoryData = [];\r\nlet tbody = document.querySelector('tbody');\r\nlet editReservationElement = `\r\n<div class=\"container reservation\">\r\n    <div class=\"reservation-wrap\">\r\n        <div class=\"container calendar\" id=\"calendar\"></div>\r\n\r\n        <div class=\"pickerColorGuide\">\r\n            <div class=\"pickerColorGuide-item\">\r\n                <div class=\"colorBox colorBox-red\"></div>\r\n                <p>預約已滿</p>\r\n            </div>\r\n            <div class=\"pickerColorGuide-item\">\r\n                <div class=\"colorBox colorBox-gray\"></div>\r\n                <p>可預約</p>\r\n            </div>\r\n            <div class=\"pickerColorGuide-item\">\r\n                <div class=\"colorBox colorBox-green\"></div>\r\n                <p>已選擇</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"container newBooking-form\">\r\n        <form action=\"\" class=\"newBooking-form-wrap\">\r\n            <div class=\"form-group\">\r\n                <div class=\"newBooking-input\">\r\n                    <label for=\"selectedDate\">日期</label>\r\n                    <input type=\"text\" id=\"selectedDate\" name=\"日期\" readonly value=\"\" class=\"form-control-plaintext\">\r\n                </div>\r\n                <div class=\"alert-message\">\r\n                    <p id=\"selectedDate-message\" data-message=\"日期\"></p>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"form-group\">\r\n                <div class=\"newBooking-input\">\r\n                    <label for=\"selectedPlan\">套裝</label>\r\n                    <select class=\"form-select form-select-sm\" id=\"selectedPlan\">\r\n                        <option selected disabled>請選擇套裝</option>\r\n                        <option value=\"基礎護理\">基礎護理</option>\r\n                        <option value=\"進階鍍晶\">進階鍍晶</option>\r\n                        <option value=\"頂級鍍膜\">頂級鍍膜</option>\r\n                    </select>\r\n                </div>\r\n                <div class=\"alert-message\">\r\n                    <p id=\"selectedPlan-message\" data-message=\"套裝\"></p>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"form-group\">\r\n                <div class=\"newBooking-input\">\r\n                    <label for=\"customerMsg\" class=\"align-self-start\">備註</label>\r\n                    <textarea class=\"form-control form-control-sm\" id=\"customerMsg\" name=\"備註\" rows=\"3\" maxlength=\"100\" placeholder=\"請提供車型\"></textarea>\r\n                </div>\r\n                <div class=\"alert-message\">\r\n                    <p id=\"customerMsg-message\" data-message=\"備註\"></p>\r\n                </div>\r\n            </div>\r\n            \r\n            <div class=\"userHistoryEditBookingBtn-group\">\r\n                <input type=\"button\" class=\"btn btn-dark-200\" value=\"取消預約\" id=\"cancelBooking\">\r\n                <input type=\"button\" class=\"btn btn-primary\" value=\"確認修改\" id=\"confirmEdit\">\r\n            </div>\r\n        </form>\r\n    </div>\r\n</div>`;\r\n\r\nfunction getUserReservation() {\r\n    axios.post(`http://localhost:3000/api/v1/customers/history`, {\r\n            'data': {\r\n                'token': userToken,\r\n            }\r\n        })\r\n        .then(response => {\r\n            userHistoryData = response.data.data;\r\n            renderUserHistory(userHistoryData);\r\n        })\r\n        .catch(error => {\r\n            console.log(error);\r\n        });\r\n}\r\n\r\nfunction updateReservation() {\r\n    let bookingId = document.querySelector('#userHistoryCalendar').previousSibling.dataset.bookingid;\r\n    console.log(typeof bookingId);\r\n    let selectedDate = new Date(document.querySelector('#selectedDate').value).setHours(0, 0, 0, 0).toString();\r\n    let selectedPlan = document.querySelector('#selectedPlan').value;\r\n    let customerMsg = document.querySelector('#customerMsg').value;\r\n\r\n    let originalBookingInfo = userHistoryData.find(({\r\n        id\r\n    }) => id === parseInt(bookingId));\r\n\r\n    if (originalBookingInfo['date'] !== selectedDate || originalBookingInfo['plan'] !== selectedPlan || originalBookingInfo['userRemarks'] !== customerMsg) {\r\n        axios.patch(`http://localhost:3000/api/v1/customers/booking`, {\r\n                'data': {\r\n                    'token': userToken,\r\n                    'bookingId': bookingId,\r\n                    'newBookingInfo': {\r\n                        \"date\": selectedDate,\r\n                        \"plan\": selectedPlan,\r\n                        \"userRemarks\": customerMsg\r\n                    }\r\n                }\r\n            })\r\n            .then(response => {\r\n                console.log(response);\r\n                alert(response.data.data.msg);\r\n                window.location.reload();\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n            });\r\n    } else {\r\n        alert('無修改');\r\n    }\r\n\r\n\r\n}\r\n\r\nfunction deleteReservation() {\r\n    let bookingId = document.querySelector('#userHistoryCalendar').previousSibling.dataset.bookingid;\r\n\r\n    axios.delete(`http://localhost:3000/api/v1/customers/booking`, {\r\n            data: {\r\n                'token': userToken,\r\n                'bookingId': bookingId\r\n            }\r\n        })\r\n        .then(response => {\r\n            alert(response.data.data.msg);\r\n            window.location.reload();\r\n        })\r\n        .catch(error => {\r\n            console.log(error);\r\n        });\r\n}\r\n\r\nfunction getSelectedBookingCalendar(selectedBooking) {\r\n    let targetYear = new Date(parseInt(selectedBooking['date'])).getFullYear();\r\n    let targetMonth = new Date(parseInt(selectedBooking['date'])).getMonth() + 1;\r\n\r\n    axios.get(`http://localhost:3000/api/v1/customers/calendar`, {\r\n            params: {\r\n                'year': targetYear.toString(),\r\n                'month': targetMonth.toString()\r\n            }\r\n        })\r\n        .then(response => {\r\n            calendarData = response.data.data;\r\n            if (calendarData['available'] === true) {\r\n                const calendar = new Calendar(calendarData);\r\n                calanderEventListeners();\r\n                renderEditReservation(selectedBooking);\r\n                currentQueryYear = parseInt(calendarData['year']);\r\n                currentQueryMonth = parseInt(calendarData['month']);\r\n            } else {\r\n                alert('該月份未開放預訂');\r\n            }\r\n        })\r\n        .catch(error => {\r\n            console.log(error);\r\n        });\r\n}\r\n\r\nfunction renderUserHistory(data) {\r\n    let str = '';\r\n    // 按日期 未來>過去 排序\r\n    data.sort((a, b) => b['date'] - a['date']);\r\n\r\n    data.forEach(el => {\r\n        let date = new Date(parseInt(el['date']));\r\n        let dateFormat = `${date.getFullYear()}/${date.getMonth()+1}/${date.getDate()}`\r\n        let editable = (el['status'] !== '已完成' && el['status'] !== '已取消') ? '<a href=\"#\" class=\"editReservationBtn\">修改</a>' : '<a>-</a>';\r\n        str += `\r\n                <tr data-bookingId='${el['id']}'>\r\n                    <td>${dateFormat}</td>\r\n                    <td>${el['plan']}</td>\r\n                    <td class='text-start'>${el['userRemarks']}</td>\r\n                    <td>${el['status']}</td>\r\n                    <td>${editable}</td>\r\n                </tr>\r\n            `;\r\n    });\r\n    tbody.innerHTML = str;\r\n}\r\n\r\nfunction renderEditReservation(selectedBooking) {\r\n    let calendarSelected = document.querySelector(`[data-date=\"${parseInt(selectedBooking['date'])}\"]`);\r\n    calendarSelected.className += ' dateInners-selected';\r\n\r\n    let selectedDate = document.querySelector('#selectedDate');\r\n    let selectedPlan = document.querySelector('#selectedPlan');\r\n    let customerMsg = document.querySelector('#customerMsg');\r\n\r\n    let selectedBookingDate = new Date(parseInt(selectedBooking['date']));\r\n    let dateFormat = `${selectedBookingDate.getFullYear()} / ${selectedBookingDate.getMonth() + 1} / ${selectedBookingDate.getDate()}`\r\n\r\n    selectedDate.value = dateFormat;\r\n    selectedPlan.value = selectedBooking['plan'];\r\n    customerMsg.value = selectedBooking['userRemarks'];\r\n}\r\n\r\nfunction createUserHistoryCalendar(targetElement) {\r\n    let userHistoryCalendar = document.querySelector('#userHistoryCalendar');\r\n    let opended = document.querySelector('.opended');\r\n\r\n    //移除已打開的 '修改' 內容     \r\n    if (userHistoryCalendar !== null) {\r\n        removeUserHistoryCalendar(opended)\r\n    }\r\n\r\n    //產生新的 '修改' 內容\r\n    let insertCalendar = document.createElement('tr')\r\n    insertCalendar.setAttribute('id', 'userHistoryCalendar')\r\n    let selectedBookingId = targetElement.parentElement.parentElement.getAttribute('data-bookingid');\r\n    let selectedBooking = userHistoryData.find(({\r\n        id\r\n    }) => {\r\n        return id.toString() === selectedBookingId;\r\n    });\r\n\r\n    tbody.insertBefore(insertCalendar, targetElement.parentElement.parentElement.nextSibling);\r\n    insertCalendar.innerHTML = `<td colspan='5'>${editReservationElement}</td>`;\r\n\r\n    getSelectedBookingCalendar(selectedBooking);\r\n\r\n    targetElement.innerText = '取消修改';\r\n    targetElement.className += ' opended';\r\n}\r\n\r\nfunction removeUserHistoryCalendar(targetElement) {\r\n    document.querySelector('#userHistoryCalendar').remove();\r\n    targetElement.innerText = '修改';\r\n    targetElement.classList.remove(\"opended\");\r\n}\r\n\r\nfunction monitorEditAction() {\r\n    let dateWrapper = document.querySelector('.dateWrapper');\r\n    let bookingFromWrap = document.querySelector('.newBooking-form-wrap');\r\n    let confirmEdit = document.querySelector('#confirmEdit');\r\n\r\n    dateWrapper.addEventListener('click', () => {\r\n        confirmEdit.addEventListener('click', () => {\r\n            updateReservation();\r\n        })\r\n    })\r\n\r\n    bookingFromWrap.addEventListener('change', () => {\r\n        confirmEdit.addEventListener('click', () => {\r\n            updateReservation();\r\n        })\r\n    })\r\n}\r\n\r\ntbody.addEventListener('click', (e) => {\r\n    if (e.target.classList.contains('opended')) {\r\n        removeUserHistoryCalendar(e.target)\r\n    } else if (e.target.classList.contains('editReservationBtn')) {\r\n        createUserHistoryCalendar(e.target);\r\n    } else if (e.target.id === 'cancelBooking') {\r\n        deleteReservation();\r\n    } else if (e.target.id === 'confirmEdit') {\r\n        updateReservation();\r\n    }\r\n})\r\n\r\ngetUserReservation();"],"mappings":"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"}