{"version":3,"file":"userInfo.js","names":["userInfoData","userInfoFormWrap","document","querySelector","resetForm","updateInfo","addEventListener","reset","customerName","value","toString","customerPhone","oldPassword","newPassword","newPasswordCfm","newUserInfo","alert","editUserInfoData","getUserInfoData","userToken","blingMotorUserStatus","axios","post","then","response","data","renderuserInfoData","error","console","log","patch","arr","Object","keys","forEach","el","setAttribute"],"sources":["userInfo.js"],"sourcesContent":["let userInfoData = {};\r\nlet userInfoFormWrap = document.querySelector('.userInfo-form-wrap');\r\nlet resetForm = document.querySelector('#resetForm');\r\nlet updateInfo = document.querySelector('#updateInfo');\r\n\r\nresetForm.addEventListener('click', () => {\r\n    userInfoFormWrap.reset();\r\n});\r\n\r\nupdateInfo.addEventListener('click', () => {\r\n    let customerName = document.querySelector('#customerName').value.toString();\r\n    let customerPhone = document.querySelector('#customerPhone').value.toString();\r\n    let oldPassword = document.querySelector('#oldPassword').value.toString();\r\n    let newPassword = document.querySelector('#newPassword').value.toString();\r\n    let newPasswordCfm = document.querySelector('#newPasswordCfm').value.toString();\r\n    let newUserInfo = {};\r\n\r\n\r\n    if (newPassword === '' && newPasswordCfm === '') {\r\n        newUserInfo['customerName'] = customerName;\r\n        newUserInfo['customerPhone'] = customerPhone;\r\n    } else if (newPassword !== '' && oldPassword === '') {\r\n        alert('如需變更密碼須輸入原密碼');\r\n    } else if (newPassword !== newPasswordCfm) {\r\n        alert('新密碼輸入不一致');\r\n    } else {\r\n        newUserInfo['customerName'] = customerName;\r\n        newUserInfo['customerPhone'] = customerPhone;\r\n        newUserInfo['oldPassword'] = oldPassword;\r\n        newUserInfo['newPassword'] = newPassword;\r\n    }\r\n    \r\n    editUserInfoData(newUserInfo);\r\n});\r\n\r\nfunction getUserInfoData() {\r\n    let userToken = blingMotorUserStatus['userInfo']['customerEmail'];\r\n    axios.post(`http://localhost:3000/api/v1/customers/info`, {\r\n            'data': {\r\n                'token': userToken,\r\n            }\r\n        })\r\n        .then(response => {\r\n            userInfoData = response.data.data;\r\n            renderuserInfoData(userInfoData);\r\n        })\r\n        .catch(error => {\r\n            console.log(error);\r\n        });\r\n}\r\n\r\nfunction editUserInfoData(newUserInfo) {\r\n    let userToken = blingMotorUserStatus['userInfo']['customerEmail'];\r\n    axios.patch(`http://localhost:3000/api/v1/customers/info`, {\r\n            'data': {\r\n                'token': userToken,\r\n                'newUserInfo': newUserInfo\r\n            }\r\n        })\r\n        .then(response => {\r\n            userInfoData = response.data.data;\r\n            alert('資料更新成功')\r\n            renderuserInfoData(userInfoData);\r\n        })\r\n        .catch(error => {\r\n            console.log(error);\r\n        });\r\n}\r\n\r\nfunction renderuserInfoData(data) {\r\n    let arr = Object.keys(data);\r\n    arr.forEach(el => {\r\n        document.querySelector(`#${el}`).setAttribute('value', data[el]);\r\n    })\r\n}\r\n\r\ngetUserInfoData();"],"mappings":";;AAAA,IAAIA,YAAY,GAAG,CAAC,CAAC;AACrB,IAAIC,gBAAgB,GAAGC,QAAQ,CAACC,aAAa,CAAC,qBAAqB,CAAC;AACpE,IAAIC,SAAS,GAAGF,QAAQ,CAACC,aAAa,CAAC,YAAY,CAAC;AACpD,IAAIE,UAAU,GAAGH,QAAQ,CAACC,aAAa,CAAC,aAAa,CAAC;AAEtDC,SAAS,CAACE,gBAAgB,CAAC,OAAO,EAAE,YAAM;EACtCL,gBAAgB,CAACM,KAAK,EAAE;AAC5B,CAAC,CAAC;AAEFF,UAAU,CAACC,gBAAgB,CAAC,OAAO,EAAE,YAAM;EACvC,IAAIE,YAAY,GAAGN,QAAQ,CAACC,aAAa,CAAC,eAAe,CAAC,CAACM,KAAK,CAACC,QAAQ,EAAE;EAC3E,IAAIC,aAAa,GAAGT,QAAQ,CAACC,aAAa,CAAC,gBAAgB,CAAC,CAACM,KAAK,CAACC,QAAQ,EAAE;EAC7E,IAAIE,WAAW,GAAGV,QAAQ,CAACC,aAAa,CAAC,cAAc,CAAC,CAACM,KAAK,CAACC,QAAQ,EAAE;EACzE,IAAIG,WAAW,GAAGX,QAAQ,CAACC,aAAa,CAAC,cAAc,CAAC,CAACM,KAAK,CAACC,QAAQ,EAAE;EACzE,IAAII,cAAc,GAAGZ,QAAQ,CAACC,aAAa,CAAC,iBAAiB,CAAC,CAACM,KAAK,CAACC,QAAQ,EAAE;EAC/E,IAAIK,WAAW,GAAG,CAAC,CAAC;EAGpB,IAAIF,WAAW,KAAK,EAAE,IAAIC,cAAc,KAAK,EAAE,EAAE;IAC7CC,WAAW,CAAC,cAAc,CAAC,GAAGP,YAAY;IAC1CO,WAAW,CAAC,eAAe,CAAC,GAAGJ,aAAa;EAChD,CAAC,MAAM,IAAIE,WAAW,KAAK,EAAE,IAAID,WAAW,KAAK,EAAE,EAAE;IACjDI,KAAK,CAAC,cAAc,CAAC;EACzB,CAAC,MAAM,IAAIH,WAAW,KAAKC,cAAc,EAAE;IACvCE,KAAK,CAAC,UAAU,CAAC;EACrB,CAAC,MAAM;IACHD,WAAW,CAAC,cAAc,CAAC,GAAGP,YAAY;IAC1CO,WAAW,CAAC,eAAe,CAAC,GAAGJ,aAAa;IAC5CI,WAAW,CAAC,aAAa,CAAC,GAAGH,WAAW;IACxCG,WAAW,CAAC,aAAa,CAAC,GAAGF,WAAW;EAC5C;EAEAI,gBAAgB,CAACF,WAAW,CAAC;AACjC,CAAC,CAAC;AAEF,SAASG,eAAe,GAAG;EACvB,IAAIC,SAAS,GAAGC,oBAAoB,CAAC,UAAU,CAAC,CAAC,eAAe,CAAC;EACjEC,KAAK,CAACC,IAAI,gDAAgD;IAClD,MAAM,EAAE;MACJ,OAAO,EAAEH;IACb;EACJ,CAAC,CAAC,CACDI,IAAI,CAAC,UAAAC,QAAQ,EAAI;IACdxB,YAAY,GAAGwB,QAAQ,CAACC,IAAI,CAACA,IAAI;IACjCC,kBAAkB,CAAC1B,YAAY,CAAC;EACpC,CAAC,CAAC,SACI,CAAC,UAAA2B,KAAK,EAAI;IACZC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;EACtB,CAAC,CAAC;AACV;AAEA,SAASV,gBAAgB,CAACF,WAAW,EAAE;EACnC,IAAII,SAAS,GAAGC,oBAAoB,CAAC,UAAU,CAAC,CAAC,eAAe,CAAC;EACjEC,KAAK,CAACS,KAAK,gDAAgD;IACnD,MAAM,EAAE;MACJ,OAAO,EAAEX,SAAS;MAClB,aAAa,EAAEJ;IACnB;EACJ,CAAC,CAAC,CACDQ,IAAI,CAAC,UAAAC,QAAQ,EAAI;IACdxB,YAAY,GAAGwB,QAAQ,CAACC,IAAI,CAACA,IAAI;IACjCT,KAAK,CAAC,QAAQ,CAAC;IACfU,kBAAkB,CAAC1B,YAAY,CAAC;EACpC,CAAC,CAAC,SACI,CAAC,UAAA2B,KAAK,EAAI;IACZC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;EACtB,CAAC,CAAC;AACV;AAEA,SAASD,kBAAkB,CAACD,IAAI,EAAE;EAC9B,IAAIM,GAAG,GAAGC,MAAM,CAACC,IAAI,CAACR,IAAI,CAAC;EAC3BM,GAAG,CAACG,OAAO,CAAC,UAAAC,EAAE,EAAI;IACdjC,QAAQ,CAACC,aAAa,YAAKgC,EAAE,EAAG,CAACC,YAAY,CAAC,OAAO,EAAEX,IAAI,CAACU,EAAE,CAAC,CAAC;EACpE,CAAC,CAAC;AACN;AAEAjB,eAAe,EAAE"}